import"../chunks/DsnmJJEf.js";import{p as ie,d as oe,c as G,b as K,a as v,n as _e,J as ee,K as ae,x as pe,L as R,A as e,f as x,N as F,M as Ee,F as s,I as c,$ as Fe,ao as z,G as t,D as B,ap as ze}from"../chunks/jd5WV0Du.js";import{s as ge,a as m}from"../chunks/GwumCs-T.js";import{i as w}from"../chunks/CFL_xKr-.js";import{I as he,e as me,c as xe,b as Ge}from"../chunks/B126N6VV.js";import{h as Ke,C as te}from"../chunks/BRMV21nc.js";import{s as re}from"../chunks/BLtbU3fE.js";import{g as qe,s as He}from"../chunks/BL3PLj43.js";import{s as ye,r as we}from"../chunks/CPgivW-j.js";import{L as Je,C as Ve,a as Qe}from"../chunks/CKI8Cgj5.js";import{E as We}from"../chunks/BHUtcvQq.js";function Xe(L,n){ie(n,!0);let b=we(n,["$$slots","$$events","$$legacy"]);const _=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];he(L,ye({name:"arrow-right"},()=>b,{get iconNode(){return _},children:(D,N)=>{var g=G(),U=K(g);ge(U,()=>n.children??_e),v(D,g)},$$slots:{default:!0}})),oe()}function se(L,n){ie(n,!0);let b=we(n,["$$slots","$$events","$$legacy"]);const _=[["circle",{cx:"12",cy:"12",r:"3"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12"}]];he(L,ye({name:"git-commit-horizontal"},()=>b,{get iconNode(){return _},children:(D,N)=>{var g=G(),U=K(g);ge(U,()=>n.children??_e),v(D,g)},$$slots:{default:!0}})),oe()}var Ye=x('<div class="p-8 text-center text-gray-500"><!> <p class="text-sm">No recent deployments</p></div>'),Ze=x('<a class="flex items-center gap-3 px-4 py-3 hover:bg-gray-800/50 transition-colors"><div class="shrink-0"><!></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="font-medium text-white truncate"> </span> <span> </span></div> <div class="text-xs text-gray-500 truncate"> </div></div> <div class="shrink-0 text-xs text-gray-500"> </div></a>'),$e=x('<div class="divide-y divide-gray-800"></div>'),ea=x('<div class="p-8 text-center text-gray-500"><!> <p class="text-sm">No recent commits</p></div>'),aa=x('<span class="text-xs text-gray-500 font-mono"> </span>'),ta=x('<span class="font-mono"> </span>'),ra=x('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-3 px-4 py-3 hover:bg-gray-800/50 transition-colors"><div class="shrink-0"><!></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="font-medium text-white truncate"> </span> <!></div> <div class="text-xs text-gray-500 truncate"><!></div></div> <div class="shrink-0 flex items-center gap-2 text-xs text-gray-500"><span> </span> <!></div></a>'),sa=x('<div class="divide-y divide-gray-800"></div>'),ia=x('<div class="flex-1 flex flex-col lg:flex-row min-h-0 h-full overflow-hidden gap-4 lg:gap-6 p-4"><div class="flex-1 flex flex-col border border-gray-800 rounded-lg min-w-0 overflow-hidden"><div class="shrink-0 px-4 py-3 border-b border-gray-800 flex items-center justify-between"><div class="flex items-center gap-2 text-gray-400"><!> <span class="text-sm font-medium">Recent Deployments</span></div> <a href="/deployments" class="text-xs text-gray-500 hover:text-gray-300 flex items-center gap-1">View all <!></a></div> <div class="flex-1 overflow-y-auto"><!></div></div> <div class="flex-1 flex flex-col border border-gray-800 rounded-lg min-w-0 overflow-hidden"><div class="shrink-0 px-4 py-3 border-b border-gray-800 flex items-center justify-between"><div class="flex items-center gap-2 text-gray-400"><!> <span class="text-sm font-medium">Recent Commits</span></div></div> <div class="flex-1 overflow-y-auto"><!></div></div></div>');function _a(L,n){ie(n,!0);const b=qe();let _=ee(ae(b?.statuses||n.data.statuses)),D=ee(ae(b?.lastUpdated||n.data.lastUpdated)),N=ee(ae(n.data.deploymentLog||[])),g=F(()=>[...e(_)].filter(r=>r.lastPush).sort((r,i)=>{const o=new Date(r.lastPush||0).getTime();return new Date(i.lastPush||0).getTime()-o}).slice(0,20));pe(()=>{n.data.statuses&&n.data.statuses.length>0&&(R(_,n.data.statuses,!0),R(D,n.data.lastUpdated,!0),He(n.data.statuses,n.data.lastUpdated)),n.data.deploymentLog&&R(N,n.data.deploymentLog,!0)});const U="https://observatory-backend.fly.dev";let be=F(()=>n.data.apiSecret||"");pe(()=>{re.connect(U,e(be));const r=re.subscribe(i=>{if(i.type==="deployment"&&i.project){const o=i.data;De(i.project,o)}});return()=>{r(),re.disconnect()}});function De(r,i){R(D,new Date().toISOString(),!0),R(_,e(_).map(o=>{if(o.repo===r||o.repo.toLowerCase()===r.toLowerCase()){let a;switch(i.status){case"success":a="success";break;case"failure":a="failure";break;case"in_progress":case"queued":a="deploying";break;default:a="unknown"}return{...o,deployStatus:a,deployedAt:new Date().toISOString(),deployUrl:i.runUrl||o.deployUrl,run_date:new Date().toISOString()}}return o}),!0)}function ne(r){if(!r)return"";const i=new Date(r),a=new Date().getTime()-i.getTime(),u=Math.floor(a/6e4),f=Math.floor(a/36e5),p=Math.floor(a/864e5);return u<1?"just now":u<60?`${u}m ago`:f<24?`${f}h ago`:p<7?`${p}d ago`:i.toLocaleDateString()}function ke(r){switch(r){case"success":return"text-green-400";case"failure":return"text-red-400";case"deploying":return"text-cyan-400";default:return"text-gray-400"}}function Ce(r){switch(r){case"success":return"Deployed";case"failure":return"Failed";case"deploying":return"Deploying";default:return"Unknown"}}var q=ia();Ke("1uha8ag",r=>{Ee(()=>{Fe.title="Console | Orchon"})});var H=s(q),J=s(H),V=s(J),Se=s(V);te(Se,{class:"w-4 h-4"}),z(2),t(V);var le=c(V,2),Le=c(s(le));Xe(Le,{class:"w-3 h-3"}),t(le),t(J);var de=c(J,2),Ne=s(de);{var Ue=r=>{var i=Ye(),o=s(i);te(o,{class:"w-8 h-8 mx-auto mb-2 opacity-50"}),z(2),t(i),v(r,i)},Ae=r=>{var i=$e();me(i,21,()=>e(N),o=>o.id,(o,a)=>{const u=F(()=>e(a).deployCompletedAt||e(a).completedAt||e(a).startedAt),f=F(()=>e(a).status==="success"?"success":e(a).status==="failure"?"failure":e(a).status==="in_progress"?"deploying":"unknown");var p=Ze(),h=s(p),A=s(h);{var j=l=>{Je(l,{class:"w-5 h-5 text-cyan-400 animate-spin"})},W=l=>{var d=G(),y=K(d);{var $=C=>{Ve(C,{class:"w-5 h-5 text-green-400"})},Ie=C=>{var ue=G(),Oe=K(ue);{var Re=S=>{Qe(S,{class:"w-5 h-5 text-red-400"})},Be=S=>{te(S,{class:"w-5 h-5 text-gray-500"})};w(Oe,S=>{e(f)==="failure"?S(Re):S(Be,!1)},!0)}v(C,ue)};w(y,C=>{e(f)==="success"?C($):C(Ie,!1)},!0)}v(l,d)};w(A,l=>{e(f)==="deploying"?l(j):l(W,!1)})}t(h);var P=c(h,2),M=s(P),k=s(M),X=s(k,!0);t(k);var T=c(k,2),Y=s(T,!0);t(T),t(M);var I=c(M,2),O=s(I);t(I),t(P);var E=c(P,2),Z=s(E,!0);t(E),t(p),B((l,d,y)=>{xe(p,"href",`/deployments?project=${e(a).projectName??""}`),m(X,e(a).projectDisplayName||e(a).projectName),Ge(T,1,`text-xs ${l??""}`),m(Y,d),m(O,`${e(a).provider??""} ${e(a).branch?`â€¢ ${e(a).branch}`:""}`),m(Z,y)},[()=>ke(e(f)),()=>Ce(e(f)),()=>ne(e(u))]),v(o,p)}),t(i),v(r,i)};w(Ne,r=>{e(N).length===0?r(Ue):r(Ae,!1)})}t(de),t(H);var ce=c(H,2),Q=s(ce),ve=s(Q),je=s(ve);se(je,{class:"w-4 h-4"}),z(2),t(ve),t(Q);var fe=c(Q,2),Pe=s(fe);{var Me=r=>{var i=ea(),o=s(i);se(o,{class:"w-8 h-8 mx-auto mb-2 opacity-50"}),z(2),t(i),v(r,i)},Te=r=>{var i=sa();me(i,21,()=>e(g),o=>o.repo+o.lastPush,(o,a)=>{var u=ra(),f=s(u),p=s(f);se(p,{class:"w-5 h-5 text-gray-400"}),t(f);var h=c(f,2),A=s(h),j=s(A),W=s(j,!0);t(j);var P=c(j,2);{var M=l=>{var d=aa(),y=s(d,!0);t(d),B(()=>m(y,e(a).version)),v(l,d)};w(P,l=>{e(a).version&&l(M)})}t(A);var k=c(A,2),X=s(k);{var T=l=>{var d=ta(),y=s(d,!0);t(d),B($=>m(y,$),[()=>e(a).lastCommitSha.slice(0,7)]),v(l,d)},Y=l=>{var d=ze();B(()=>m(d,`Pushed to ${e(a).owner??""}/${e(a).repo??""}`)),v(l,d)};w(X,l=>{e(a).lastCommitSha?l(T):l(Y,!1)})}t(k),t(h);var I=c(h,2),O=s(I),E=s(O,!0);t(O);var Z=c(O,2);We(Z,{class:"w-3 h-3"}),t(I),t(u),B(l=>{xe(u,"href",e(a).repoUrl),m(W,e(a).repo),m(E,l)},[()=>ne(e(a).lastPush)]),v(o,u)}),t(i),v(r,i)};w(Pe,r=>{e(g).length===0?r(Me):r(Te,!1)})}t(fe),t(ce),t(q),v(L,q),oe()}export{_a as component};
