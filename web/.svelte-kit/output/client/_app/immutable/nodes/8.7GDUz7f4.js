import"../chunks/DsnmJJEf.js";import{p as fe,d as ue,c as K,b as Q,a as f,n as $e,J as ne,K as le,x as Ee,L as P,f as _,I as n,F as o,D as w,A as e,M as He,$ as qe,G as a,N as H}from"../chunks/jd5WV0Du.js";import{s as Ke,d as Qe,a as x}from"../chunks/GwumCs-T.js";import{i as b}from"../chunks/CFL_xKr-.js";import{I as Ve,e as q,i as Xe,a as ce,s as Be,b as We,c as ve}from"../chunks/B126N6VV.js";import{h as Ye,C as de}from"../chunks/BRMV21nc.js";import{g as Ze}from"../chunks/Dnr1q622.js";import{s as et,r as tt}from"../chunks/CPgivW-j.js";import{X as at}from"../chunks/B4o4KnKK.js";import{C as rt,G as st}from"../chunks/IP838Ow-.js";import{L as ot,C as it,a as nt}from"../chunks/CKI8Cgj5.js";import{E as lt}from"../chunks/BHUtcvQq.js";function ct(T,p){fe(p,!0);let u=tt(p,["$$slots","$$events","$$legacy"]);const g=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]];Ve(T,et({name:"funnel"},()=>u,{get iconNode(){return g},children:(j,F)=>{var k=K(),I=Q(k);Ke(I,()=>p.children??$e),f(j,k)},$$slots:{default:!0}})),ue()}var vt=_("<option> </option>"),dt=_('<button class="flex items-center gap-1 px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-500 transition-colors"> <!></button>'),ft=_('<button class="px-2 py-0.5 text-xs bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded transition-colors"> </button>'),ut=_('<div class="flex flex-wrap items-center gap-2"><span class="text-xs text-gray-500">Recent:</span> <!></div>'),_t=_('<p class="text-sm mt-1">Try selecting a different project or clear the filter</p>'),xt=_('<div class="p-8 text-center text-gray-500"><!> <p class="text-lg">No deployments found</p> <!></div>'),pt=_('<span class="flex items-center gap-1"><!> </span>'),gt=_('<a target="_blank" rel="noopener noreferrer" class="font-mono text-xs hover:text-blue-400 transition-colors"> </a>'),mt=_('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 hover:text-blue-400 transition-colors">View logs <!></a>'),ht=_('<div class="px-4 py-4 hover:bg-gray-800/30 transition-colors"><div class="flex items-start gap-4"><div class="shrink-0 mt-0.5"><!></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 flex-wrap"><button class="font-medium text-white hover:text-blue-400 transition-colors"> </button> <span> </span> <span class="text-xs text-gray-600 capitalize"> </span></div> <div class="flex items-center gap-4 mt-1.5 text-sm text-gray-500"><!> <!> <!></div></div> <div class="shrink-0 text-right"><div class="flex items-center gap-1.5 text-sm text-gray-400"><!> </div> <div class="text-xs text-gray-600 mt-0.5"> </div></div></div></div>'),bt=_('<div class="divide-y divide-gray-800"></div>'),yt=_('<div class="flex-1 flex flex-col h-full overflow-hidden"><div class="shrink-0 px-4 py-4 border-b border-gray-800 bg-gray-900/50"><div class="flex flex-col gap-3"><div class="flex items-center justify-between"><h1 class="text-lg font-semibold text-white">Deployment Log</h1> <span class="text-sm text-gray-500"> </span></div> <div class="flex flex-wrap items-center gap-2"><!> <select class="bg-gray-800 border border-gray-700 rounded px-3 py-1.5 text-sm text-gray-300 focus:outline-none focus:border-blue-500"><option>All Projects</option><!></select> <!></div> <!></div></div> <div class="flex-1 overflow-y-auto"><!></div></div>');function It(T,p){fe(p,!0);let u=ne(le(p.data.projectFilter)),g=ne(le([]));Ee(()=>{{const t=localStorage.getItem("orchon-recent-project-filters");if(t)try{P(g,JSON.parse(t),!0)}catch{P(g,[],!0)}}});let j=H(()=>e(u)?p.data.deployments.filter(t=>t.projectName===e(u)):p.data.deployments);function F(t){return p.data.projects.find(i=>i.id===t)?.name||t}function k(t){P(u,t,!0);{const r=new URL(window.location.href);t?r.searchParams.set("project",t):r.searchParams.delete("project"),Ze(r.toString(),{replaceState:!0,noScroll:!0}),t&&!e(g).includes(t)&&(P(g,[t,...e(g).filter(i=>i!==t)].slice(0,5),!0),localStorage.setItem("orchon-recent-project-filters",JSON.stringify(e(g))))}}function I(t){if(!t)return"Unknown";const r=new Date(t),s=new Date().getTime()-r.getTime(),d=Math.floor(s/6e4),v=Math.floor(s/36e5),m=Math.floor(s/864e5);return d<1?"just now":d<60?`${d}m ago`:v<24?`${v}h ago`:m<7?`${m}d ago`:r.toLocaleDateString()}function _e(t){return t?new Date(t).toLocaleString():""}function xe(t){switch(t){case"success":return"text-green-400";case"failure":return"text-red-400";case"in_progress":return"text-cyan-400";default:return"text-gray-400"}}function pe(t){switch(t){case"success":return"Success";case"failure":return"Failed";case"in_progress":return"Deploying";case"queued":return"Queued";default:return"Unknown"}}var U=yt();Ye("1tckhxz",t=>{He(()=>{qe.title="Deployments | Orchon"})});var N=o(U),V=o(N),z=o(V),X=n(o(z),2),ge=o(X);a(X),a(z);var G=n(z,2),B=o(G);ct(B,{class:"w-4 h-4 text-gray-500 shrink-0"});var y=n(B,2);y.__change=t=>k(t.currentTarget.value||null);var J=o(y);J.value=J.__value="";var me=n(J);q(me,17,()=>p.data.projects,ce,(t,r)=>{var i=vt(),s=o(i,!0);a(i);var d={};w(()=>{x(s,e(r).name),d!==(d=e(r).id)&&(i.value=(i.__value=e(r).id)??"")}),f(t,i)}),a(y);var W;Xe(y);var he=n(y,2);{var be=t=>{var r=dt();r.__click=()=>k(null);var i=o(r),s=n(i);at(s,{class:"w-3 h-3"}),a(r),w(d=>x(i,`${d??""} `),[()=>F(e(u))]),f(t,r)};b(he,t=>{e(u)&&t(be)})}a(G);var ye=n(G,2);{var we=t=>{var r=ut(),i=n(o(r),2);q(i,17,()=>e(g),ce,(s,d)=>{var v=ft();v.__click=()=>k(e(d));var m=o(v,!0);a(v),w(L=>x(m,L),[()=>F(e(d))]),f(s,v)}),a(r),f(t,r)};b(ye,t=>{e(g).length>0&&!e(u)&&t(we)})}a(V),a(N);var Y=n(N,2),ke=o(Y);{var Se=t=>{var r=xt(),i=o(r);de(i,{class:"w-12 h-12 mx-auto mb-3 opacity-50"});var s=n(i,4);{var d=v=>{var m=_t();f(v,m)};b(s,v=>{e(u)&&v(d)})}a(r),f(t,r)},je=t=>{var r=bt();q(r,21,()=>e(j),i=>i.id,(i,s)=>{const d=H(()=>e(s).deployCompletedAt||e(s).completedAt||e(s).startedAt),v=H(()=>e(s).status);var m=ht(),L=o(m),O=o(L),De=o(O);{var Ce=l=>{ot(l,{class:"w-5 h-5 text-cyan-400 animate-spin"})},Le=l=>{var c=K(),h=Q(c);{var S=D=>{it(D,{class:"w-5 h-5 text-green-400"})},Ge=D=>{var ie=K(),Je=Q(ie);{var Oe=C=>{nt(C,{class:"w-5 h-5 text-red-400"})},Re=C=>{de(C,{class:"w-5 h-5 text-gray-500"})};b(Je,C=>{e(v)==="failure"?C(Oe):C(Re,!1)},!0)}f(D,ie)};b(h,D=>{e(v)==="success"?D(S):D(Ge,!1)},!0)}f(l,c)};b(De,l=>{e(v)==="in_progress"?l(Ce):l(Le,!1)})}a(O);var R=n(O,2),$=o(R),A=o($);A.__click=()=>k(e(s).projectName);var Ae=o(A,!0);a(A);var M=n(A,2),Me=o(M,!0);a(M);var Z=n(M,2),Pe=o(Z,!0);a(Z),a($);var ee=n($,2),te=o(ee);{var Te=l=>{var c=pt(),h=o(c);st(h,{class:"w-3.5 h-3.5"});var S=n(h);a(c),w(()=>x(S,` ${e(s).branch??""}`)),f(l,c)};b(te,l=>{e(s).branch&&l(Te)})}var ae=n(te,2);{var Fe=l=>{var c=gt(),h=o(c,!0);a(c),w(S=>{ve(c,"href",`https://github.com/jaslr/${e(s).projectName??""}/commit/${e(s).commitSha??""}`),x(h,S)},[()=>e(s).commitSha.slice(0,7)]),f(l,c)};b(ae,l=>{e(s).commitSha&&l(Fe)})}var Ie=n(ae,2);{var Ue=l=>{var c=mt(),h=n(o(c));lt(h,{class:"w-3 h-3"}),a(c),w(()=>ve(c,"href",e(s).runUrl)),f(l,c)};b(Ie,l=>{e(s).runUrl&&l(Ue)})}a(ee),a(R);var re=n(R,2),E=o(re),se=o(E);rt(se,{class:"w-3.5 h-3.5"});var Ne=n(se);a(E);var oe=n(E,2),ze=o(oe,!0);a(oe),a(re),a(L),a(m),w((l,c,h,S)=>{x(Ae,e(s).projectDisplayName||e(s).projectName),We(M,1,`text-xs px-1.5 py-0.5 rounded ${l??""} bg-gray-800`),x(Me,c),x(Pe,e(s).provider),x(Ne,` ${h??""}`),x(ze,S)},[()=>xe(e(v)),()=>pe(e(v)),()=>I(e(d)),()=>_e(e(d))]),f(i,m)}),a(r),f(t,r)};b(ke,t=>{e(j).length===0?t(Se):t(je,!1)})}a(Y),a(U),w(()=>{x(ge,`${e(j).length??""} deployment${e(j).length!==1?"s":""}`),W!==(W=e(u)||"")&&(y.value=(y.__value=e(u)||"")??"",Be(y,e(u)||""))}),f(T,U),ue()}Qe(["change","click"]);export{It as component};
